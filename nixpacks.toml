[phases.setup]
# Pin to nixpkgs commit with Node.js 22.13.1 (meets Prisma requirement of 22.12+)
nixpkgsArchive = "51ad838b03a05b1de6f9f2a0fffecee64a9788ee"

[phases.install]
cmds = ["npm install -g pnpm", "pnpm install --frozen-lockfile"]

[phases.build]
cmds = ["npx prisma generate", "pnpm build"]

[start]
cmd = "npx prisma db push && npx prisma db seed && pnpm start"
